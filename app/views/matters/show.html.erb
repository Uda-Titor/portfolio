
<%= render 'matter_show', matter: @matter %>

<style>
/* マップを表示する div 要素の高さを必ず明示的に指定します。 */
#map {
  height: 400px;
  width: 600px;
}
</style>

<body>
<div id="map"></div><!-- 地図を表示する div 要素（id="map"）-->
<script>
  var map;
function initMap() {
  var latitude = <%= @matter.latitude %>
  console.log(latitude);
  var longitude = <%= @matter.longitude %>
  var myLatlng = new google.maps.LatLng(latitude, longitude);
 //インスタンスを作成
 map = new google.maps.Map(document.getElementById('map'), {
  //地図のオプション
  //初期のズームレベル
  zoom: 12,
  //地図の中心点
  center: myLatlng
 });
 //マーカーの初期プロパティを指定
 marker = new google.maps.Marker({
  position: myLatlng,
  //ドラッグを許可
  draggable: false,
  map: map,
 });
}
google.maps.event.addDomListener(window, 'load', initMap);
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=<%=ENV['APIKEY']%>&callback=initMap" async defer></script>
</body>
<% unless @matter.user_id == current_user.id %>
  <% if @favorite.present? %>
    <%= link_to 'お気に入り解除する', favorite_path(id: @favorite.id), method: :delete, class: 'btn btn-danger' %>
  <% else %>
    <%= link_to 'お気に入りする', favorites_path(matter_id: @matter.id), method: :post, class: 'btn btn-primary' %>
  <% end %>
<% end %>

  <div id="comments_area">
    <%= render partial: 'comments/index', locals: { comments: @comments, matter: @matter } %>
  </div>
  <%= render partial: 'comments/form', locals: { comment: @comment, matter: @matter } %>

<%= link_to 'Edit', edit_matter_path(@matter) %> |
<%= link_to 'Back', matters_path %>
